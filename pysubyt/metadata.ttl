@prefix tree: <https://w3id.org/tree#> .
@prefix ldes: <https://w3id.org/ldes#> .
@prefix dc: <http://purl.org/dc/terms/> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix gsp: <http://www.opengis.net/ont/geosparql#> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix mr: <http://marineregions.org/ns/ontology#> .
@prefix schema: <https://schema.org/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .

<https://w3id.org/ldes/ldes#> a ldes:ApiEntryPoint ;
    ldes:hasEntryPoint <https://w3id.org/ldes/ldes#entrypoint> .

{% for result in sets['qres'] -%}
<http://vocab.nerc.ac.uk/ldes/feed/{{result.date}}>
 a tree:Node ;
 tree:relation [ tree:node <http://vocab.nerc.ac.uk/ldes/feed/{{result.previous_date}}> ] ;
 ldes:retentionPolicy [
    a ldes:TimeBasedRetentionPolicy ;
    ldes:timeBasedRetentionPeriod "{{retention_period}}"^^xsd:duration ;
 ].
{% for change in result.results -%}
<{{change.id.value}}>
    a skos:Concept ;
    dcat:modified "{{change.modified.value}}"^^xsd:dateTime ;
    .
{% endfor %}
{% endfor %}